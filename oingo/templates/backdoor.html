<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>backdoor</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body>
<div class="container" align="center">
<H1>This is backdoor page(demo only)</H1>
    <form action="/backdoorUpdate/" method="post">
        {% csrf_token %}
        Modify Your Current Time?
        <div>
            <input type="radio" name="modifyTime" value="True" {% if modify_time %} checked {% endif %} >
            <label>Yes</label>

            <input type="radio" name="modifyTime" value="False" {% if not modify_time %} checked {% endif %} >
            <label>No</label>
        </div>

        <div>
            Day
            <input type="date" value="2019-01-01" name="date">

            Time
            <input type="time" value="01:00" name="time">
        </div>

        Modify Your Current Location?
        <div>
            <input type="radio" name="modifyLocation" value="True" {% if modify_location %} checked {% endif %} >
            <label>Yes</label>

            <input type="radio" name="modifyLocation" value="False" {% if not modify_location %} checked {% endif %} >
            <label>No</label>
        </div>

        <div>
            selected location
            <input type="text" value="40.694183931237575" name="displayLat" readonly="readonly">
            <input type="text" value="-73.98693701268212" name="displayLog" readonly="readonly">
        </div>

        <button class="btn btn-primary" style="margin: 20px" type="submit">update my status</button>

    </form>
    <div id="googleMap" style="width:400px;height:400px;"></div>
</div>

<h1 align="center">All notes:</h1>
<table class="table">
    <thead>
    <tr>
        <th scope="col">Note Text</th>
        <th scope="col">Username</th>
        <th scope="col">Latitude</th>
        <th scope="col">Longitude</th>
        <th scope="col">Radius</th>
        <th scope="col">Date</th>
        <th scope="col">Start Time</th>
        <th scope="col">End Time</th>
        <th scope="col">Schedule Type</th>
        <th scope="col">Visibility</th>
    </tr>
    </thead>
    <tbody>
    {% for note in notes %}
        <tr>
            <td>{{ note.ntext }}</td>
            <td>{{ note.uid.username }}</td>
            <td>{{ note.lat }}</td>
            <td>{{ note.lng }}</td>
            <td>{{ note.radius }}</td>
            <td>{{ note.time_date }}</td>
            <td>{{ note.start_time }}</td>
            <td>
                {{ note.end_time }}
            </td>
            <td>
                {% if note.scheduletype == 0 %}
                    no repetition
                {% elif note.scheduletype == 1 %}
                    daily
                {% elif note.scheduletype == 2 %}
                    weekly
                {% elif note.scheduletype == 3 %}
                    monthly
                {% elif note.scheduletype == 4 %}
                    yearly
                {% endif %}
            </td>
            <td>
                {% if note.visibility == 0 %}
                    self
                {% elif note.visibility == 1 %}
                    friends
                {% elif note.visibility == 2 %}
                    everyone
                {% endif %}
            </td></tr>
    {% endfor %}
    </tbody>
</table>

<script>
function myMap() {
    var mapProp= {
        center:new google.maps.LatLng(40.696423,-73.986611),
        zoom:13,
    };
    var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);
    google.maps.event.addListener(map, 'click', function(event) {
        let latitude = event.latLng.lat();
        let longitude = event.latLng.lng();
        //alert( latitude + ", " + longitude);
        //document.getElementById("lat").innerHTML = latitude;
        document.getElementsByName("displayLat")[0].setAttribute("value", latitude);
        //document.getElementById("log").innerHTML = longitude;
        document.getElementsByName("displayLog")[0].setAttribute("value", longitude);
        console.log("latitude: ", latitude);
        console.log("longitude: ", longitude);
    });
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC-VWYShTlN6nFvPrYc_rbIZuyQv9y6644&callback=myMap"></script>
</body>
</html>